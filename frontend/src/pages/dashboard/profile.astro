---
import DashboardLayout from '@/layouts/DashboardLayout.astro';
import { ProfilePage } from '@/components/profile/ProfilePage';

/**
 * Profile Page - User Profile Management
 * Protected page dla zalogowanych użytkowników
 *
 * Features:
 * - SSR z React islands dla interaktywności
 * - Redux Provider dla state management
 * - Auth guard (wymaga JWT token)
 * - User Stories: US-005 (Edycja profilu), US-006 (Ustawienia powiadomień), US-016 (GDPR)
 *
 * Layout:
 * - Uses DashboardLayout with sidebar navigation
 * - Responsive mobile-first design
 *
 * Security:
 * - Wymaga uwierzytelnienia JWT (handled by AuthGuard client-side)
 * - Redirect do /login jeśli niezalogowany
 * - CSRF protection przez API
 */

/**
 * Page title i meta
 */
const pageTitle = 'Mój profil | mkrew';
const pageDescription = 'Zarządzaj swoimi danymi osobowymi, preferencjami powiadomień i ustawieniami konta w platformie mkrew.';
---

<DashboardLayout title={pageTitle} description={pageDescription}>
  <!-- Meta tags -->
  <Fragment slot="head">
    <meta name="robots" content="noindex, nofollow" />
  </Fragment>

  <!-- Profile Content with Auth Guard and Redux Provider wrapped in single component -->
  <ProfilePage client:only="react" />
</DashboardLayout>
